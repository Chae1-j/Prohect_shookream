<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itwillbs.shookream.mapper.BoardMapper">

<insert id="insertBoard">
<selectKey keyProperty="notice_idx" resultType="int" order="BEFORE">
SELECT IFNULL(MAX(notice_idx),0)
FROM notice
</selectKey>

INSERT INTO notice
VALUES(
#{notice_idx}+1
,#{notice_category}
,#{notice_subject}
,#{notice_content}
,#{notice_readcount}
,now()
,#{notice_type}
)
</insert>

<select id="selectBoardList" resultType="com.itwillbs.shookream.vo.BoardBean">
SELECT * 
FROM notice
WHERE notice_type = #{notice_type} AND notice_subject
LIKE '%${keyword}%'
ORDER BY notice_idx DESC
LIMIT #{startRow},#{listLimit}
</select>

<select id="selectBoardListCount" resultType="int">
SELECT COUNT(*)
FROM notice
WHERE notice_type=#{notice_type}
</select>

<update id="updateReadcount">
UPDATE notice
SET notice_readcount = notice_readcount+1
WHERE notice_idx=#{notice_idx}

</update>

<select id="selectBoard" resultType="com.itwillbs.shookream.vo.BoardBean">
SELECT *
FROM notice 
WHERE notice_idx = #{notice_idx}
</select>

<update id="updateBoard">
UPDATE notice
SET notice_subject = #{notice_subject}, notice_content = #{notice_content}
WHERE notice_idx = #{notice_idx}
</update>

<delete id="deleteBoard">
DELETE FROM notice
WHERE notice_idx= #{notice_idx}

</delete>

</mapper>